<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Poetry Widget</title>
</head>
<body>

  <div id="poetry-widget-container"></div>

  <script>
    if (!window.process) {
      window.process = { env: { NODE_ENV: 'production' } };
    }

    const script = document.createElement('script');
    script.src = 'https://widget.theitalianpoetryproject.com/my-poetry-app.iife.js';
    script.crossOrigin = 'anonymous';

    script.onload = function () {
      if (!window.MyPoetryApp?.mount) {
        document.getElementById('poetry-widget-container').innerText =
          'Widget non disponibile';
        return;
      }

      window.MyPoetryApp.mount(
        document.getElementById('poetry-widget-container'),
        {
          supabase: {
            url: 'https://djikypgmchywybjxbwar.supabase.co',
            anonKey: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRqaWt5cGdtY2h5d3lianhid2FyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTMyMTMyOTIsImV4cCI6MjA2ODc4OTI5Mn0.dXqWkg47xTg2YtfLhBLrFd5AIB838KdsmR9qsMPkk8Q'ðŸ‘ˆ LA TUA ANON KEY'
          },
          onReady: () => console.log('[Widget] pronto'),
          onError: (err) => console.error('[Widget]', err)
        }
      );
    };

    script.onerror = function () {
      document.getElementById('poetry-widget-container').innerText =
        'Errore nel caricamento del widget';
    };

    document.body.appendChild(script);
  </script>

</body>
</html>